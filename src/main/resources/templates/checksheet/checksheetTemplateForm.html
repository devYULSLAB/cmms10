<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
  layout:decorate="~{layout/defaultLayout}">

<head>
  <title>체크시트 템플릿 생성</title>

  <!-- jQuery 및 formBuilder -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <script src="https://formbuilder.online/assets/js/form-builder.min.js"></script>
</head>

<body>
  <div layout:fragment="content">
    <div class="max-w-5xl mx-auto bg-white p-6 rounded shadow">
      <h2 class="text-2xl font-bold mb-4">🧩 체크시트 템플릿 작성</h2>

      <!-- 템플릿 저장 Form -->
      <form th:action="@{/checksheet/checksheetTemplateSave}" method="post">
        <div class="mb-4">
          <label class="block font-medium text-gray-700 mb-1">템플릿 이름</label>
          <input type="text" name="templateName" required class="w-full border border-gray-300 rounded px-3 py-2">
        </div>

        <!-- JSON 저장용 textarea (숨김) -->
        <textarea id="form-template" name="templateJson" hidden></textarea>

        <!-- formBuilder 표시 영역 -->
        <div id="form-builder"
          class="border border-dashed border-gray-400 p-4 bg-gray-50 rounded h-[600px] overflow-auto"></div>

        <div class="mt-6 flex justify-end">
          <button type="submit" onclick="saveTemplate()"
            class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded">
            💾 저장
          </button>
        </div>
      </form>
    </div>
  </div>

  <th:block layout:fragment="page-js">
    <script>
      const formBuilder = $('#form-builder').formBuilder();

      function saveTemplate() {
        const json = formBuilder.actions.getData('json');
        document.getElementById("form-template").value = json;
      }
    </script>
  </th:block>
</body>

</html>